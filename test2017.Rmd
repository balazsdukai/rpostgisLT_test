---
title: "rpostgisLT test 2017"
author: "Bal√°zs Dukai"
date: '`r format(Sys.Date(), "%B %d, %Y")`'
output: html_notebook
---

```{r setup, message=FALSE}
library(rpostgis)
library(lubridate)
```

# Part 1

Read roe deer trajectories.

```{r read_roe_gps}
data("roe_sensors_animals_tables")
data("roe_gps_data")

gps_data <- rbind(roe_gps_data$GSM01511[c("gps_sensors_code","utc_date",
                                          "utc_time","latitude","longitude")],
                roe_gps_data$GSM01512[c("gps_sensors_code","utc_date",
                                        "utc_time","latitude","longitude")])
```

Create an `ltraj` from the data.

```{r ltraj_roe}
gps_data$tstamp <- dmy_hms(paste(gps_data[1, "utc_date"],
                                 gps_data[1, "utc_time"], sep = " "),
                           tz = "UTC")
gps_data <- dplyr::rename(gps_data, x = longitude, y = latitude)
gps_data <- dplyr::select(gps_data, x, y, tstamp, gps_sensors_code)

proj4string <- sp::CRS("+init=epsg:4326")

roe_ltraj <- adehabitatLT::as.ltraj(gps_data, date = gps_data$tstamp,
                                    id = gps_data$gps_sensors_code,
                                    proj4string = proj4string)
```

